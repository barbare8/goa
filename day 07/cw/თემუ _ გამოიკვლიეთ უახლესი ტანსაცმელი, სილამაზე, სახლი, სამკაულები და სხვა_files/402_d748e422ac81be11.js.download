"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[402],{90402:function(t,e,n){n.r(e),n.d(e,{ComponentContext:function(){return k},ComponentProvider:function(){return S},createComponentStore:function(){return C},useComponentStore:function(){return w}});var r=n(81862),o=n(94761),i=n(12330),l=n(8226),s=n(50853),u=(n(44936),n(96391),n(87246),n(69460),n(17385),n(92374),n(91560),n(16120),n(31002),n(60452),n(23395),n(80978),n(11183),n(93801),n(78529),n(88225)),c=n(68775),a=n(98613),d=n(8994),f=n(99099),p=n(26166),m=n(18389),v=n(27364),I=n(34161),g=n(19126),_=n(89714),y=n(44621),h=n(60733),L=n(20076),T=n(59998),x=n(51578),P=n(49346),R=function(t){function e(){return t.apply(this,arguments)||this}return(0,P._)(e,t),e}(L.Y),D=(0,T.fz)((function(t){var e={nodeCommon:{},context:{},$service:{},goodsList:[],recommendGoodsList:[],offset:0,hasMore:!0,status:x.sB.EMPTY,limit:20,isShowViewMore:!1,isShowPolicy:!1,filterList:[],selectedFilter:[],isFilterDataLoaded:!1,hoverObj:{text:"",x:-100,y:0},categoryList:[],optId:"",vrParams:{cmmDsId:"",secOptId:"",title:"",recPoolId:""},listId:(0,c.x)(),isVrDs:!1,activityName:"",disableItemList:[],linkUrl:"",hasFirstReqLoaded:!1};return(0,_.M)()((0,a.n)((function(n,a){return(0,o._)({},e,t,{setHoverText:function(t,e,r){n((function(n){n.hoverObj={text:t,x:e,y:r}}))},setIsVrDs:function(t){n((function(e){e.isVrDs=t}))},setGoodsList:function(t){n((function(e){e.goodsList=t}))},initService:function(){n((function(t){t.$service=new R(a().context.$axiosHttp)}))},getInitialProps:(0,r._)((function(t){var e,r,o,i,l,c,d,f,p,m;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return e=t.isServer,r=a(),o=r.initService,i=r.nodeCommon.props,l=r.goodsList,c=r.queryGoodsList,d=r.setVrParams,f=r.setIsVrDs,r.__innerGlobalStore,o(),(p=i.dsId)!==L.y.VR002&&p!==L.y.VR001||(f(!0),d()),(null==l?void 0:l.length)?[3,2]:[4,c(e)];case 1:s.sent(),s.label=2;case 2:return n((function(t){t.hasFirstReqLoaded=!0})),m=a().status,e||m!==x.sB.FAILED||i.goodsEmpty!==x.mY.GO_DEFAULT||(0,u.r1)({errorType:u.RN.GOODS_EMPTY,opt:{ds_id:p}}),[2]}}))})),setVrParams:function(){var t,e,r,o=((null!=(r=null==(e=a())||null==(t=e.__innerGlobalStore)?void 0:t.getState())?r:{}).sysInfo||{}).query;n((function(t){t.vrParams={cmmDsId:null==o?void 0:o.cmm_ds_id,secOptId:null==o?void 0:o.sec_opt_id,title:null==o?void 0:o.view_all_title,recPoolId:null==o?void 0:o.pool_id}}))},queryGoodsList:(0,r._)((function(t){var e,r,u,c,v,_,L,T,P,R,D,k,S,w,C,G,E,A,F,O,B,U,q,M,N,b,j,V,Y,$,z,H,Q,K,W,Z,J,X,tt,et,nt,rt,ot,it,lt,st,ut,ct,at,dt,ft;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),r=a(),u=r.offset,c=r.status,v=r.nodeCommon,_=v.props,L=v.customName,T=v.pageBase,P=v.sysInfo,R=r.$service,D=r.context,k=r.vrParams,S=r.listId,w=r.isVrDs,C=_.limit,G=void 0===C?x.UZ:C,E=_.dsId,A=_.card,F=_.type,O=_.optRecType,B=_.activityName,U=_.poolId,q=_.skipPageTitle,M=_.manualTopGoods,N=(null==(e=(0,d.hb)(D))?void 0:e.leoProxyInfo)||{},b=(null==N?void 0:N.tmpl)?(0,I.ru)((0,o._)({},N),"https://www.temu.com/kuiper/"+(null==N?void 0:N.tmpl)+".html"):"",j=b?{penetrateParams:{tt_referer:b}}:{},c===x.sB.PENDING?[2]:(V=(0,o._)({dsId:E,offset:u,limit:G,listId:S,goodsCardItemType:null==A?void 0:A.cardType,recPoolId:U,manualTopGoods:M,goodsPoolParam:U?{poolId:U,title:q||"",cmmDsId:E}:q?{title:q}:void 0},j),B&&(V.activityName=B),w&&(V=(0,o._)({},V,{dsId:null==k?void 0:k.cmmDsId,secOptId:null==k?void 0:k.secOptId,recPoolId:null==k?void 0:k.recPoolId})),F===x.oY.TAB_NEW&&(V.optRecType=O,V.useCondition=!1,V.needCategoryRec=!0,$=f.jU?window.location.search:null==D||null==(Y=D.__req)?void 0:Y.originalUrl,z=(0,g.parse)($,{ignoreQueryPrefix:!0}),V.optId=z.optId||"",V.optType=z.optType||"",n((function(t){t.optId=z.optId||""}))),x.oY.FILTER===F&&(V.useCondition=!0,V.needCategoryRec=F===x.oY.FILTER,W=f.jU?null==(Q=window)||null==(H=Q.location)?void 0:H.search:null==D||null==(K=D.__req)?void 0:K.originalUrl,Z=(0,g.parse)(W,{ignoreQueryPrefix:!0}),V.filterItems=Z.filterItems||"",V.optId=Z.optId||"",V.optType=Z.optType||"",J=Z.activity_name||"",n((function(t){t.optId=Z.optId||"",t.activityName=J}))),n((function(t){t.status=x.sB.PENDING})),[4,R.fetchGoodsList(V)]);case 1:if(X=t.sent(),tt=X.kpDsItemList,et=X.filterRegion,nt=X.categoryRecResult,rt=X.hasMore,ot=X.message,X.subTabList,it=X.linkUrl,lt=X.disableItemList,nt&&(st=(0,p.nI)(D).t,n((function(t){t.categoryList=[{optName:st("masonry.recommended"),optId:"",optType:""}].concat((null==nt?void 0:nt.optList)||[])}))),et&&n((function(t){var e,n,r;t.isFilterDataLoaded=!0;var l,s=[];null==et||null==(n=et.rankSorter)||null==(e=n.filters)||e.forEach((function(t){Object.assign(t,{isSection:!0}),(null==t?void 0:t.selected)&&s.push(t)})),t.selectedFilter=s.concat(et.selectedFilter);var u=null!=(l=null==et||null==(r=et.innerFilter)?void 0:r.filterList)?l:[];t.filterList=u.map((function(t){var e=t.filters,n=void 0===e?[]:e,r=t.viewMore,l=(0,i._)(t,["filters","viewMore"]),s=n.map((function(t){return t.selected})).lastIndexOf(1)+1,u=Math.ceil(Math.max(.1,s)/r);return(0,o._)({},l,{viewMore:r,filters:n.slice(0,u*r),$filters:n.slice(u*r)})}))})),!(null==tt?void 0:tt.length)&&![x.oY.FILTER].includes(F))throw new Error(ot||(0===u?"first screen goods empty":"queryGoodsList error"));return n((function(t){t.disableItemList=lt||[],t.goodsList=(0,l._)(0==u?[]:t.goodsList).concat((0,l._)((0,h.yq)(tt,{cardTrackingInfo:{card_type:y.mq.CARD_DEFAULT,custom_name:L},pageBase:T,sysInfo:P}))),t.offset+=G;var e=t.nodeCommon.props,n=e.limitMode,r=e.type,o=n===x.yx.LIMITED&&r===x.oY.NORMAL;t.hasMore=!o&&!!rt,it&&(t.linkUrl=it)})),n((function(t){t.status=x.sB.DONE})),[3,3];case 2:return ut=t.sent(),ft=!!(null==(dt=a())||null==(at=dt.nodeCommon)||null==(ct=at.pageBase)?void 0:ct.isBot),f.jU?(n((function(t){t.hasMore=!1,t.status=x.sB.FAILED})),ft||(0,m.HG)(ut)):n((function(t){t.status=x.sB.DONE})),[3,3];case 3:return[2]}}))})),onFilterItemClick:function(t,e,r){var o=t.filter,i=t.isSection;n((function(t){t.offset=0,t.listId=(0,c.x)();var n=[];t.filterList.forEach((function(t){var l=t.filters,s=t.multi;l.forEach((function(t){t.filter===o?(t.selected=e&&r?1:t.selected?0:1,t.minPrice=e,t.maxPrice=r):(0===s||t.isSection&&i)&&(t.selected=0);var l=t.filter,u=t.minPrice,c=t.maxPrice,a=t.name,d="Z104:"===t.filter&&u&&c;t.selected&&n.push({filter:d?""+l+u+","+c:l,name:a,selected:1})}))})),t.selectedFilter=n}));var l=a().selectedFilter.map((function(t){return t.filter})).join("|");(0,v.qz)({filterItems:l}),a().queryGoodsList()},reset:function(t){var e=a().selectedFilter,r=t?e.filter((function(e){var n=e.filter;return n!==t&&0!==n.indexOf(t)})):[];n((function(t){t.selectedFilter=r,t.offset=0,t.listId=(0,c.x)()}));var o=r.map((function(t){return t.filter})).join("|");(0,v.qz)({filterItems:o}),a().queryGoodsList()},appendFilterList:(0,r._)((function(t){var e;return(0,s.__generator)(this,(function(r){return e=t.identifier,n((function(t){t.filterList.forEach((function(t){var n=t.identifier,r=t.filters,o=t.$filters,i=t.viewMore;e===n&&(t.filters=r.concat(null==o?void 0:o.slice(0,i)),t.$filters=null==o?void 0:o.slice(i))}))})),[2]}))}))})})))})),k=D.ComponentContext,S=D.ComponentProvider,w=D.useComponentStore,C=D.createComponentStore},69688:function(t,e,n){n.d(e,{Ig:function(){return c},pt:function(){return d},yq:function(){return a}});var r=n(94761),o=n(12330),i=(n(17385),n(91560),n(60452),n(23395),n(1205),n(67904),n(87246),n(65530)),l=n(91715),s=n(34161),u=n(61017),c=function(t,e){void 0===e&&(e="");var n=t||{},r=n.priceStr,o=n.priceText,i=n.marketPriceText,l=n.reductionText,s=n.appPromotionPriceText,u=n.appPromotionReductionText;return{showPriceStr:(o?o[1]:r)||e,unitPrefix:o?o[0]:"",unitSuffix:o?o[2]:"",showMarketPriceStr:i&&i.length?i.join(""):"",reductionText:l,showAppPromotionPriceText:s&&s.length?s.join(""):"",showPromotionReductionText:u&&u.length?u.join(""):"",marketPriceText:i,priceText:o}},a=function(t,e){void 0===t&&(t=[]);var n=function(t){return null==t?void 0:t.some((function(t){var e,n,r,o;return(null==t||null==(n=t.commonRecGoods)||null==(e=n.image)?void 0:e.width)!==(null==t||null==(o=t.commonRecGoods)||null==(r=o.image)?void 0:r.height)}))}(t);return t.map((function(t,c){var a,d,f,p,m,v,I,g,_,y=t.commonRecGoods,h=t.dsItemType,L=t.image,T=y||{},x=T.pRec,P=T.pSearch,R=T.ad,D=T.mRec,k=T.mTrc,S=T.linkUrl,w=T.seoLinkUrl,C=(0,o._)(T,["pRec","pSearch","ad","mRec","mTrc","linkUrl","seoLinkUrl"]);return{type:i.i.NORMAL_GOODS,index:c,data:(0,r._)({cardTrackingInfo:null!=(_=null==e?void 0:e.cardTrackingInfo)?_:{},dsItemType:h,allLongImage:n,themeCard:L,pRec:(0,l.or)(x),pSearch:(0,l.or)(P),ad:(0,l.or)(R),mRec:(0,l.or)(D),mTrc:(0,l.or)(k)},C,{linkUrl:(0,u.Y7)((null==e||null==(a=e.sysInfo)?void 0:a.userAgent)||"")&&(null==e||null==(d=e.pageBase)?void 0:d.tmpl)&&["dk3","dk8"].includes(null==e||null==(f=e.pageBase)?void 0:f.tmpl)?(0,s.ru)({r_pid:null==e||null==(p=e.pageBase)?void 0:p.subj,r_idx:c},S):S,seoLinkUrl:(0,u.Y7)((null==e||null==(m=e.sysInfo)?void 0:m.userAgent)||"")&&(null==e||null==(v=e.pageBase)?void 0:v.tmpl)&&["dk3","dk8"].includes(null==e||null==(I=e.pageBase)?void 0:I.tmpl)?(0,s.ru)({r_pid:null==e||null==(g=e.pageBase)?void 0:g.subj,r_idx:c},w):w,reportIndex:null==e?void 0:e.reportIndex})}}))},d=function(t){return"string"!=typeof t?t:(t.startsWith("http")||t.startsWith("/")||(t="/"+t),t.split("?")[0])}},60733:function(t,e,n){n.d(e,{Ig:function(){return r.Ig},T9:function(){return o.T9},pt:function(){return r.pt},yq:function(){return r.yq}});var r=n(69688),o=n(28159)},28159:function(t,e,n){n.d(e,{T9:function(){return s},zy:function(){return l}});var r=n(94761),o=n(91715),i=n(4524),l=function(t,e){return t?{m_rec:(0,o.or)(t.mRec),p_rec:(0,o.or)(t.pRec),ad:(0,o.or)(t.ad),p_search:(0,o.or)(t.pSearch),m_trc:(0,o.or)(t.mTrc)}:{}},s=function(t){var e,n,s=t.data,u=t.index,c=(0,i.CA)((function(t){return t.nodeInfo})).customName;return(0,r._)({custom_name:c},function(t,e){return(0,r._)({idx:e,goods_id:null==t?void 0:t.goodsId,card_type:null==t?void 0:t.dsItemType},l(t,e))}(s,u),(0,o.At)(null!=(e=null==s?void 0:s.tracking)?e:{}),null!=(n=null==s?void 0:s.algoTracking)?n:{})}},20076:function(t,e,n){n.d(e,{Y:function(){return l},y:function(){return r}});var r=function(t){return t.G006="g006",t.G008="g008",t.CAT002="cat002",t.G020="g020",t.VR002="vr002",t.VR001="vr001",t.G040="g040",t.SC002="sc002",t.REC001="rec001",t.G033="g033",t.G017="g017",t.G019="g019",t}({}),o=n(49346),i=n(70176),l=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).fetchGoodsList=function(t){return e.post({url:i.vh.KP_DS,params:t}).then((function(t){return(null==t?void 0:t.result)||{}})).catch((function(t){return t}))},e}return(0,o._)(e,t),e}(n(82664).m)},26166:function(t,e,n){n.d(e,{nI:function(){return f},Ep:function(){return m},df:function(){return v}});var r=n(89290),o=(n(2778),n(5127),n(17385),n(80417),n(40812),n(87246),n(21295),n(60647),n(21531),n(91560),n(99099)),i=n(54197),l=n(89166),s=n.n(l),u=(n(96526),n(8226)),c=(n(22979),n(91211),n(70309),n(99492),n(69460),n(94414)),a=n(11083);function d(t,e){return function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return(null==n?void 0:n.ns)!==c.QA&&(null==e?void 0:e.ns)!==c.QA||(0,a.v)(t),e.apply(void 0,[t,n].concat((0,u._)(o)))}}n(21725);function f(t){return o.jU?function(t){t.t=d(0,t.t);var e=t.getFixedT;return t.getFixedT=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(0,e.apply(void 0,(0,u._)(n)))},t}(i.ZP):null==t||null==(e=t.__req)?void 0:e.i18n;var e}var p=function(t,e,n){if(t=t||"",!e)return t;var o=Object.entries(e).reduce((function(t,e){var n=(0,r._)(e,2),o=n[0],i=n[1],l=new RegExp(s()("{{"+o+"}}"),"g");return t.replace(l,i||"")}),t);return n?o.replace(/<[^<>]*?>/g,""):o};function m(t,e,n,r,i){var l,s=o.kk?n:null!=(l=null==t?void 0:t(e))?l:n,u=p(s,r);return i?u.replace(/<[^<>]*?>/g,""):u}function v(t,e,n,r,o){return{str:m(t,e,n,r,!0),html:m(t,e,n,o)}}},68775:function(t,e,n){n.d(e,{x:function(){return r}});var r=(0,n(54807).kP)("abcdefghijklmnopqrstuvwxyz",10)}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/js/402_d748e422ac81be11.js.map